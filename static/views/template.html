<!-- VIEW: TEMPLATE -->
<section class="view" id="template">
    <div class="tabs-container">
        <div class="tabs-bar-wrapper">
            <div class="tabs-bar" id="template-tabs">
                <!-- Tabs will be added dynamically -->
            </div>
            <button class="btn-create" id="create-template-btn">+ Create</button>
        </div>
        <div class="tabs-content" id="template-content">
            <!-- Empty state - shown when no tabs open -->
            <div class="empty-state-container" id="template-empty-state">
                <div class="empty-state-list" id="template-empty-list">
                    <!-- Will be populated by JS -->
                </div>
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" class="empty-icon" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                        <path d="M7 7h10M7 12h10M7 17h6"></path>
                    </svg>
                    <p class="empty-text">No template selected</p>
                    <p class="empty-subtext">Select a template from the list or create a new one</p>
                </div>
            </div>

            <!-- Template details - shown when a tab is active -->
            <div class="template-details" id="template-details" style="display: none;">
                <!-- Header with title and actions -->
                <div class="template-header">
                    <div class="template-header-info">
                        <h2 class="template-title" id="template-title">Template</h2>
                        <p class="template-subtitle" id="template-subtitle">Loading...</p>
                    </div>
                    <div class="template-actions">
                        <span id="template-action-status"></span>

                        <!-- Schedule Control Buttons (hidden by default, shown when scheduled) -->
                        <div class="schedule-controls" id="schedule-controls" style="display: none;">
                            <span class="schedule-status-badge" id="schedule-status-badge">
                                <span class="status-dot"></span>
                                <span class="status-text">Running</span>
                            </span>
                            <button class="btn btn-icon btn-schedule btn-start" id="start-schedule-btn" title="Start Schedule" style="display: none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                </svg>
                                Start
                            </button>
                            <button class="btn btn-icon btn-schedule btn-pause" id="pause-schedule-btn" title="Pause Schedule">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="6" y="4" width="4" height="16"></rect>
                                    <rect x="14" y="4" width="4" height="16"></rect>
                                </svg>
                                Pause
                            </button>
                            <button class="btn btn-icon btn-schedule btn-resume" id="resume-schedule-btn" title="Resume Schedule" style="display: none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                </svg>
                                Resume
                            </button>
                            <button class="btn btn-icon btn-schedule btn-stop" id="stop-schedule-btn" title="Stop Schedule">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
                                </svg>
                                Stop
                            </button>
                        </div>

                        <!-- Scan Control Buttons (hidden by default, shown when template has scan block) -->
                        <div class="scan-controls" id="scan-controls" style="display: none;">
                            <span class="scan-status-badge" id="scan-status-badge">
                                <span class="status-dot"></span>
                                <span class="status-text">Scanning</span>
                            </span>
                            <button class="btn btn-icon btn-scan btn-stop" id="stop-scan-btn" title="Stop Scanning">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
                                </svg>
                                Stop
                            </button>
                        </div>

                        <!-- Await Control Buttons (hidden by default, shown when awaiting responses) -->
                        <div class="await-controls" id="await-controls" style="display: none;">
                            <span class="await-status-badge" id="await-status-badge">
                                <span class="status-dot"></span>
                                <span class="status-text">Waiting for responses</span>
                            </span>
                            <button class="btn btn-icon btn-await btn-stop" id="stop-await-btn" title="Cancel Await">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="15" y1="9" x2="9" y2="15"></line>
                                    <line x1="9" y1="9" x2="15" y2="15"></line>
                                </svg>
                                Cancel
                            </button>
                        </div>

                        <button class="btn btn-icon" id="run-template-btn" title="Run Template">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                            </svg>
                            Run
                        </button>
                        <button class="btn btn-icon btn-secondary" id="update-template-btn" title="Edit Template">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                            Edit
                        </button>
                        <button class="btn btn-icon btn-danger" id="delete-template-btn" title="Delete Template">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>

                <!-- View toggle -->
                <div class="template-view-toggle">
                    <button class="btn btn-secondary btn-sm" id="toggle-template-view-btn">Simplify</button>
                </div>

                <!-- Diagram View (default) -->
                <div class="template-diagram-view" id="template-diagram-view">
                    <div class="template-diagram-canvas" id="template-diagram-canvas">
                        <!-- Diagram will be rendered here by JS -->
                    </div>
                </div>

                <!-- Simple View (hidden by default) -->
                <div class="template-simple-view" id="template-simple-view" style="display: none;">
                    <div class="card">
                        <div class="card-title">Template Details</div>

                        <div class="detail-row">
                            <span class="detail-label">Template ID</span>
                            <span class="detail-value" id="template-id">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Workspace ID</span>
                            <span class="detail-value" id="template-workspace-id">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Trigger</span>
                            <span class="detail-value" id="template-trigger">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Blocks</span>
                            <span class="detail-value" id="template-blocks">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Created</span>
                            <span class="detail-value" id="template-created">-</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Message Configuration</div>

                        <div class="detail-row">
                            <span class="detail-label">Target</span>
                            <span class="detail-value" id="template-target">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Message</span>
                            <span class="detail-value" id="template-message">-</span>
                        </div>

                        <div class="detail-row">
                            <span class="detail-label">Response</span>
                            <span class="detail-value" id="template-response">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>